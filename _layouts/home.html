---
layout: default
title: home
---

{% for work in site.works %}
<article class="work closed" style="background-color: {{ work.cor_principal }}">
    <h3>{{ work.title }}</h3>
    <div class="work-container">
        <div class="work-left">
            <h4>{{ work.ano }}</h4>
            <h4>{{ work.category }}</h4>
            <p>{{ work.description }}</p>
            {% for link-group in page.link-groups %}
                <a href="{{ link-group.link }}">{{ link-group.linktext }}</a>
            {% endfor %}
        </div>
        <div class="work-right" style="background-color: {{ work.cor_secundaria }}">
            <ul class="scroller">
                {% for image in work.images %}
                <li><img class="lazy" data-src="https://images.weserv.nl?url=https://josecostatorres.github.io{{ image }}&h=450&q=80&output=webp" src="https://images.weserv.nl?url=https://josecostatorres.github.io{{ image }}&h=450&q=20&output=webp"></li>
                {% endfor %}
            </ul>
        </div>
    </div>
</article>
{% endfor %}


<script>
    var $ = jQuery.noConflict();
    $(document).ready(function() {

        $('.scroller li:first-of-type .lazy').Lazy();

        $('.work h3').on('click', function() {
            if ($(this).parent().hasClass('closed')) {
                $(this).on('mouseleave', function() {
                    $(this).unbind('mouseleave');
                });
                $(this).parent().addClass("work-open");
                // show image and info
                var workall = $(this).parent().find('.work-container');
                var time = 60;
                workall.slideToggle(time, function() {
                    if ($(this).is(':visible'))
                        $(this).css('display', 'flex');
                });
                // close every other list item
                $('.work-container').not(workall).hide(time / 2).delay(30).removeClass("work-open");

                $(this).parent().find('img.lazy').Lazy({
                    effect: "fadeIn",
                    effectTime: 60,
                    threshold: 300,
                    scrollDirection: 'horizontal',
                    appendScroll: $('.work-right')
                });

            } else if (!$(this).parent().hasClass('work-open')) {
                $(this).parent().removeClass("work-open");
            }
        });


        $('.work-right').click(function() {
            $(this).find('ul').animate({
                scrollRight: '+=500'
            }, 100);
            setTimeout(function() {
                $(this).animate({
                    scrollLeft: '0'
                }, 100)
            }, 8000);
        })

    });

</script>
